#### 1. Вычисление SQL-выражений. Конвейер.

##### Вычисление выражений.
- Вычисление выражений, содержащих несколько реляционных операций, существует несколько вариантов вычисления. Если каждая операция вычисляется отдельно и результатом такого шага является временное отношение, то такая ситуация называется материализацией. Альтернативным способом является организация конвейра (pipeline) выполнения параллельных операций.

##### Конвейер. 
- Уменьшает стоимость чтения и записи временных отношений. Довольно быстрый отклик в передаче результатов запроса, если план запроса позволяет полноценный конвейер.
###### Конвейер бывает 2х типов:
1) Demand-driven (Ленивое вычисление). Demand-driven - результат запроса операций низкого уровня не передается автоматически на более высокий уровень. Он будет передан, когда будет осуществлен запрос более высокого уровня.
2) Producer-driven (Жадное вычисление). Producer-driven - операции не ждут запрос для вычисления кортежей. Каждая операция в producer-driven конвейере моделируется как отдельный процесс или поток в системе, которая на вход принимает поток кортежей и на выходе также поток кортежей.


##### Реализация конвейера вычислений.
1) Каждая операция в ленивом конвейере может быть разработана как итератор, который предоставляет следующие функции: open(), next(), close().
2) После вызова open(), каждое обращение к next() возвращает следующий кортеж на выход операции. 
3) Функция close() сообщает итератору, что больше кортежей не требуется.
4) Итератор хранит состояние вычисления между вызовами. Конвейеры с жадным вычислением реализованы другим образом.
5) Для каждой смежной пары операций в конвейере, система создает буфер для фиксации кортежей, передающиеся с одной операции на другую.
6) Процессы (или потоки) разных операций работаю параллельно. Каждая операция внизу кортежа последовательно вычисляет кортежи для вывода, и передает его в буфер вывода, до момента переполнения буфера.
7) Как только операция использует кортеж из входного буфера, он удаляется из буфера.
8) Если буфер вывода полный, то операция ожидает забор данных из буфера более высокоуровневой операцией. Существует возможность распараллеливания операций внутри конвейера в случае многопроцессорных систем.

#### 2. Нормализация БД.
- Цель нормализации: исключить избыточное дублирование данных, которое является причиной аномалий, возникших при добавлении, редактировании и удалении кортежей (строк таблицы).
- Нормальная форма — требование, предъявляемое к структуре таблиц в теории реляционных баз данных для устранения из базы избыточных функциональных зависимостей между атрибутами (полями таблиц).
- Метод нормальных форм (НФ) состоит в сборе информации о объектах решения задачи в рамках одного отношения и последующей декомпозиции этого отношения на несколько взаимосвязанных отношений на основе процедур нормализации отношений.

##### 1НФ:
- Отношение находится в 1НФ, если все его атрибуты являются простыми, все используемые домены должны содержать только скалярные значения. Не должно быть повторений строк в таблице.

##### 2НФ:
- Отношение находится во 2НФ, если оно находится в 1НФ и каждый не ключевой атрибут неприводимо зависит от Первичного Ключа (ПК). Неприводимость означает, что в составе потенциального ключа отсутствует меньшее подмножество атрибутов, от которого можно также вывести данную функциональную зависимость.

##### 3НФ:
- Переменная отношения находится в третьей нормальной форме тогда и только тогда, когда она находится во второй нормальной форме, и отсутствуют транзитивные функциональные зависимости неключевых атрибутов от ключевых.

###### Нормальная форма Бойса-Кодда (НФБК):
- Определение 3НФ не совсем подходит для следующих отношений:
1) отношение имеет два или более потенциальных ключа;
2) два и более потенциальных ключа являются составными;
3) они пересекаются, т.е. имеют хотя бы один общий атрибут.
- Для отношений, имеющих один потенциальный ключ (первичный), НФБК является 3НФ.
- Отношение находится в НФБК, когда каждая нетривиальная и неприводимая слева функциональная зависимость обладает потенциальным ключом в качестве детерминанта.
- Переменная отношения находится в нормальной форме Бойса — Кодда (иначе — в усиленной третьей нормальной форме) тогда и только тогда, когда каждая её нетривиальная и неприводимая слева функциональная зависимость имеет в качестве своего детерминанта некоторый потенциальный ключ.

##### 4НФ:
- Переменная отношения находится в четвёртой нормальной форме, если она находится в нормальной форме Бойса — Кодда и не содержит нетривиальных многозначных зависимостей. В отношении R (A, B, C) существует многозначная зависимость R.A->R.B в том и только в том случае, если множество значений B, соответствующее паре значений A и C, зависит только от A и не зависит от С.

##### 5НФ:
- Отношения находятся в 5НФ, если оно находится в 4НФ и отсутствуют сложные зависимые соединения между атрибутами. Если «Атрибут_1» зависит от «Атрибута_2», а «Атрибут_2» в свою очередь зависит от «Атрибута_3», а «Атрибут_3» зависит от «Атрибута_1», то все три атрибута обязательно входят в один кортеж.

###### Доменно-ключевая нормальная форма (ДКНФ):
- Переменная отношения находится в ДКНФ тогда и только тогда, когда каждое наложенное на неё ограничение является логическим следствием ограничений доменов и ограничений ключей, наложенных на данную переменную отношения.
- Ограничение домена – ограничение, предписывающее использовать для определённого атрибута значения только из некоторого заданного домена. Ограничение по своей сути является заданием перечня (или логического эквивалента перечня) допустимых значений типа и объявлением о том, что указанный атрибут имеет данный тип.
- Ограничение ключа – ограничение, утверждающее, что некоторый атрибут или комбинация атрибутов является потенциальным ключом.
- Любая переменная отношения, находящаяся в ДКНФ, обязательно находится в 5НФ. Однако не любую переменную отношения можно привести к ДКНФ.

##### 6НФ:
- Переменная отношения находится в шестой нормальной форме тогда и только тогда, когда она удовлетворяет всем нетривиальным зависимостям соединения. Из определения следует, что переменная находится в 6НФ тогда и только тогда, когда она неприводима, то есть не может быть подвергнута дальнейшей декомпозиции без потерь. 
