# 1. NoSQL базы данных (лк 15)
NoSQL (not only SQL) — обозначение широкого класса разнородных систем
управления базами данных, появившихся в конце 2000-х — начале 2010-х годов
и существенно отличающихся от традиционных реляционных СУБД с доступом
к данным средствами языка SQL. – определение из Wiki
Простыми словами, NoSQL — это общее название для нереляционных баз
данных.
## Ключ-значение – наиболее простой вариант хранилища данных, использующий
ключ для доступа к значению в рамках большой хэш-таблицы.
* Хранит хэш-таблицу ключей, где каждый ключ связан с непрозрачным
бинарным объектом
* Быстрая запись, но доступ только к одной ячейке
* Легко горизонтально масштабируется, идеально для приложений с
большими массивами простых данных

Примеры: Oracle NoSQL Database, Berkeley DB, MemcacheDB, Redis, Riak,
Amazon DynamoDB

## Семейство столбцов
* Другие названия – столбчатая, колоночная БД
* БД, в которой данные группируются и хранятся (физически) не по
строкам, а по столбцам
* Оптимизированы для быстрого извлечения столбцов данных и
применяются, как правило, в аналитических приложениях
* Использование столбчатых таблиц баз данных для хранения
оказывает большое влияние на производительность аналитических
запросов, поскольку значительно снижает общие требования к
операциям дискового ввода-вывода и сокращает объем данных,
которые требуется загружать с диска.
* Типичным применением этого типа СУБД является вебиндексирование, а также задачи, связанные с большими данными, с
пониженными требованиями к согласованности.
* Примерами СУБД данного типа являются: ScyllaDB, Hypertable, ClickHouse

## СУБД графовая - разновидность баз данных с реализацией сетевой модели в виде направленного графа и его обобщений.
## СУБД документированная - СУБД, специально предназначенная для хранения иерархических структур данных (документов) и обычно реализуемая с помощью подхода NoSQL.

{ "_id" : 1, "item" : "abc1", qty: 300, price: 1000}
{ "_id" : 2, "item" : "abc2", qty: 200, price: 4000}
{ "_id" : 3, "item" : “abc3", qty: 250, price: 600}

## Свойства NoSQL:
* В то время как традиционные СУБД ориентируются на требования
ACID к транзакционной системе, в NoSQL рассматривается набор
свойств BASE:
* базовая доступность (basic availability) — каждый запрос
гарантированно завершается (успешно или безуспешно)
* гибкое состояние (soft state) — состояние системы может изменяться
со временем, даже без ввода новых данных, для достижения
согласования данных
* согласованность в конечном счёте (eventual consistency) — данные
могут быть некоторое время рассогласованы, но приходят к
согласованию через некоторое время
Теорема Брюера
Теорема CAP (известная также как теорема Брюера) — база данных может
обладать не более чем двумя свойствами одновременно:
* согласованность данных (consistency) — во всех вычислительных
узлах в один момент времени данные не противоречат друг другу;
* доступность (availability) — любой запрос к распределённой системе
завершается корректным откликом, однако без гарантии, что ответы
всех узлов системы совпадают;
* устойчивость к разделению (partition tolerance) — расщепление
распределённой системы на несколько изолированных секций не
приводит к некорректности отклика от каждой из секций.
# 2. Реализация конвейера вычислений (лк 11).
Для вычисления выражений, содержащих несколько реляционных
операций, существует несколько вариантов вычисления.
Если каждая операция вычисляется отдельно и результатом такого шага
является временное отношение, то такая ситуация называется
материализацией.
Альтернативным способом является организация конвейера (pipeline)
выполнения параллельных операций
Конвейер
Уменьшает стоимость чтения и записи временных отношений. Довольно
быстрый отклик в передаче результатов запроса, если план запроса
позволяет полноценный конвейер.
## Конвейер бывает 2 типов:
1. Demand-driven (Ленивое вычисление). Demand-driven - результат
запроса операций низкого уровня не передается автоматически на
более высокий уровень. Он будет передан, когда будет осуществлен
запрос более высокого уровня.
2. Producer-driven (Жадное вычисление). Producer-driven - операции не
ждут запрос для вычисления кортежей. Каждая операция в producerdriven конвейере моделируется как отдельный процесс или поток в
системе, которая на вход принимает поток кортежей и на выходе
также поток кортежей.
## Реализация конвейера вычислений
1. Каждая операция в ленивом конвейере может быть разработана как
итератор, который предоставляет следующие функции: open(),
next(), close().
2. После вызова open(), каждое обращение к next() возвращает
следующий кортеж на выход операции.
3. Функция close() сообщает итератору, что больше кортежей не
требуется.
4. Итератор хранит состояние вычисления между вызовами.
Конвейеры с жадным вычислением реализованы другим образом.
5. Для каждой смежной пары операций в конвейере, система создает
буфер для фиксации кортежей, передающиеся с одной операции на
другую.
6. Процессы (или потоки) разных операций работаю параллельно.
Каждая операция внизу кортежа последовательно вычисляет
кортежи для вывода, и передает его в буфер вывода, до момента
переполнения буфера.
7. Как только операция использует кортеж из входного буфера, он
удаляется из буфера.
8. Если буфер вывода полный, то операция ожидает забор данных из
буфера более высокоуровневой операцией. Существует возможность
распараллеливания операций внутри конвейера в случае
многопроцессорных систем.
